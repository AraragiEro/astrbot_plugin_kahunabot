
<p align="center">

![9213766CB158786A6C4C0291F715FE5F](https://github.com/user-attachments/assets/98d13492-7e5d-43bd-b3c3-b583699b23f0)

</p>

<dev align="center">

_ç¬¨ç¬¨çš„kahunaä¸åœçš„è®¡ç®—è‡ªå·±ç¦»ä¹°ç‰›è§’åŒ…è¿˜æœ‰å¤šè¿œ_

_ä¸€åº§æ–°çš„*å±±æ‹”åœ°è€Œèµ·ï¼_

</dev>

æœ¬æ’ä»¶å¤„äºæ—©æœŸå¼€å‘é˜¶æ®µï¼Œè¿˜æœ‰å¥½å¤šå¥½å¤šçš„bug~

æ¬¢è¿æissue~

---
# â­åŠŸèƒ½å±•ç¤º

#### å‰ä»–å’Œè”ç›Ÿå¸‚åœºä»·æ ¼æŸ¥è¯¢
![å‰ä»–å’Œè”ç›Ÿå¸‚åœºä»·æ ¼æŸ¥è¯¢](https://github.com/user-attachments/assets/3ba07ddf-a136-407c-95bd-5850b0b55657)

#### æˆæœ¬æŸ¥è¯¢
![æˆæœ¬æŸ¥è¯¢](https://github.com/user-attachments/assets/63ecbd0c-2f91-491a-9ead-693646a81e5a)

#### å·¥ä¸šè§„åˆ’ä¸æŠ¥è¡¨è¾“å‡º
![å·¥ä¸šè§„åˆ’](https://github.com/user-attachments/assets/f23b7873-dbb3-48df-9ee9-4d07ed4dba21)

![æŠ¥è¡¨è¾“å‡º1](https://github.com/user-attachments/assets/9d2f4b57-04a4-4f31-909e-fbb72e86e4fb)

![æŠ¥è¡¨è¾“å‡º2](https://github.com/user-attachments/assets/235c724e-f465-4966-98b8-0dc4cf7acc50)

#### åˆ©æ¶¦åˆ†æ
![åˆ©æ¶¦åˆ†æ](https://github.com/user-attachments/assets/8b835d57-e093-42c0-896d-bb93579c9935)

ğŸ‘‰æŠ¥è¡¨å†…å®¹ä¸°å¯Œï¼ŒåŒ…æ‹¬ä»»åŠ¡åˆ†è§£ï¼Œææ–™é‡‡è´­ï¼Œç‰©æµæ¸…å•ï¼Œå·¥ä½œä»»åŠ¡ç­‰ï¼Œä¸€ç«™å¼è§£æ”¾å·¥ä¸šåˆ¶é€ çš„è„‘åŠ›æ¶ˆè€—ï¼ŒğŸ«¡å…¬å¸çº§åˆ«æä¾›æ™ºèƒ½è®¡ç®—æœåŠ¡ã€‚


# ğŸ˜‡å¦‚ä½•éƒ¨ç½²ï¼Ÿ
## éƒ¨ç½²AstrBot
æœ¬é¡¹ç›®æ˜¯astrbotæ¡†æ¶é¢å‘QQçš„æœºå™¨äººæ’ä»¶ï¼Œä½ éœ€è¦å…ˆéƒ¨ç½²åŸºäºastrbotçš„qqæœºå™¨äººã€‚

è¿™é‡Œå‰å¾€ [AstrBot](https://github.com/AstrBotDevs/AstrBot.git) ä»“åº“ã€‚

---
## ä¸‹è½½æ’ä»¶
æ’ä»¶æš‚æ—¶æ²¡æœ‰ä¸Šæ¶æ’ä»¶å•†åœºï¼Œéœ€è¦æ‰‹åŠ¨éƒ¨ç½²ã€‚

é¦–å…ˆå‰å¾€pluginç›®å½•ï¼š
```
AstrBot/
â”œâ”€â”€ [å…¶ä»–æ–‡ä»¶]/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ [å…¶ä»–æ–‡ä»¶]/
â”‚   â”œâ”€â”€ plugins/              # æ’ä»¶ç›®å½•
```

å°†é¡¹ç›®cloneåˆ°pluginæ–‡ä»¶å¤¹ä¸‹
```bash
git clone https://github.com/AraragiEro/astrbot_plugin_kahunabot.git
```

kahunabotçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
kahunabot/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ event/              # äº‹ä»¶å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ permission_checker/ # æƒé™æ£€æŸ¥æ¨¡å—
â”‚   â”œâ”€â”€ resource/           # èµ„æºæ–‡ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ css/           # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ img/           # å›¾ç‰‡èµ„æº
â”‚   â”‚   â””â”€â”€ templates/     # æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ rule_checker/      # è§„åˆ™æ£€æŸ¥æ¨¡å—
â”‚   â”œâ”€â”€ service/           # æœåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ asset_server/  # èµ„äº§æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ chat_server/   # èŠå¤©æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ market_server/ # å¸‚åœºæœåŠ¡
â”‚   â”‚   â””â”€â”€ sde_service/   # SDEæ•°æ®æœåŠ¡
â”‚   â””â”€â”€ utils/             # å·¥å…·æ¨¡å—
â”œâ”€â”€ data/                   # æ•°æ®ç›®å½•
â”œâ”€â”€ config.ini.example     # é…ç½®æ–‡ä»¶
â”œâ”€â”€ main.py                # æ’ä»¶å…¥å£
â”œâ”€â”€ filter.py              # æƒé™è¿‡æ»¤å™¨
â””â”€â”€ requirements.txt       # ä¾èµ–åŒ…åˆ—è¡¨
```

---
## é…ç½®æ’ä»¶

### å®‰è£…ä¾èµ–
- å®‰è£…Playwright
```bash
# ä¸‹è½½é€Ÿåº¦æ…¢å¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ é€Ÿæº pip install playwright -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install playwrightã€
```

2. å®‰è£…æµè§ˆå™¨ä¾èµ–
```bash
python -m playwright install chromium
```

3. å¦‚æœåœ¨Linuxç¯å¢ƒä¸‹ï¼Œå¯èƒ½éœ€è¦å®‰è£…é¢å¤–çš„ç³»ç»Ÿä¾èµ–
```bash
python -m playwright install-deps
```

### å‡†å¤‡SDEæ•°æ®åº“
- sdeæ•°æ®åº“ç”Ÿæˆå·¥å…·ï¼š**[EVE-SDE-Database-Builder](https://github.com/EVEIPH/EVE-SDE-Database-Builder.git)**
- å®˜æ–¹sdeæ•°æ®åº“æ›´æ–°åœ°å€ï¼š**[https://developers.eveonline.com/](https://developers.eveonline.com/)**

ä½¿ç”¨æ•°æ®åº“ç”Ÿæˆå·¥å…·å¤„ç†ccpå®˜æ–¹å‘å¸ƒçš„sdeæ•°æ®åº“è¾“å‡ºè‹±æ–‡å’Œä¸­æ–‡çš„sqliteç‰ˆæœ¬æ•°æ®åº“å¤‡ç”¨ã€‚

ğŸ‘‡å‚è€ƒä¸‹å›¾ğŸ‘‡

![image2](https://github.com/user-attachments/assets/8db7c904-dbd7-4497-a0ad-efdc6358c58b)

### é£ä¹¦apiè·å–

å‰å¾€ **[é£ä¹¦å¼€å‘å¹³å°](https://open.feishu.cn/app)** æ³¨å†Œè´¦å·ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåº”ç”¨è·å–appidå’ŒSecretid

![image3](https://github.com/user-attachments/assets/3e321503-edaa-48f8-b964-5a2d39712a73)

![image4](https://github.com/user-attachments/assets/820341a3-c37d-42af-a67b-b05c0eed8706)

æ·»åŠ æœºå™¨äººåº”ç”¨

![image5](https://github.com/user-attachments/assets/310e6f16-93a1-45fc-b5d4-6d65b85814ba)

å¼€é€šåº”ç”¨æƒé™ï¼Œå…¨é€‰äº‘æ–‡æ¡£æƒé™å³å¯

![image6](https://github.com/user-attachments/assets/e83653ed-3e72-4264-94a7-77ca751109fd)

ç»™æœºå™¨äººæ·»åŠ äº‘æ–‡æ¡£æƒé™ [å¦‚ä½•ä¸ºåº”ç”¨å¼€é€šäº‘æ–‡æ¡£ç›¸å…³èµ„æºçš„æƒé™](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-add-permissions-to-app)

æ–°å»ºä¸€ä¸ªäº‘æ–‡æ¡£æ–‡ä»¶å¤¹å¹¶è·å–é“¾æ¥ï¼Œå½¢å¼ä¸º`https://bcnzl0ndjqqq.feishu.cn/drive/folder/{folder_id}` ,å°†folder_idè®°å½•



### ä¿®æ”¹é…ç½®æ–‡ä»¶
å°†`config.ini.example`å¤åˆ¶ä¸€ä»½,é‡å‘½åä¸º`config.ini`ã€‚

```ini
[APP]
DBTYPE = sqlite # æ•°æ®åº“ç±»å‹ï¼Œæš‚æ—¶åªæ”¯æŒsqliteã€‚æœ¬åœ°æ•°æ®åº“è®°å¾—å¤šå¤‡ä»½å“¦~

[FEISHU]
APP_ID = MyApp      # é£ä¹¦è¡¨æ ¼è¾“å‡ºç›¸å…³é…ç½®
SECRET_ID = 1.0     
FOLDER_ROOT = xxx   # å¡«å…¥åˆšæ‰è·å–çš„folder_id

[POSTGREDB]     # æš‚æœªå¯ç”¨
Host = localhost
Port = 5432
User = admin
Password = secret

[SQLITEDB] # æ•°æ®åº“è·¯å¾„ï¼Œå¡«å†™ç»å¯¹è·¯å¾„
CONFIG_DB = F:\path\to\kahuna.db
CACHE_DB = F:\path\to\cache.db
SDEDB = F:\path\to\sde.db           # åˆšæ‰è·å–çš„è‹±æ–‡sdeæ•°æ®åº“
CN_SDEDB = F:\path\to\sde_cn.db     # åˆšæ‰è·å–çš„ä¸­æ–‡sdeæ•°æ®åº“

[EVE]   # eveç›¸å…³é…ç½®ï¼Œåœ¨https://developers.eveonline.com/ç”³è¯·åº”ç”¨è·å–
CLIENT_ID =
SECRET_KEY =
MARKET_AC_CHARACTER_ID=     # ç©å®¶å»ºç­‘å¸‚åœºè®¿é—®è§’è‰²idï¼Œå…ˆç½®ç©º

[ESI]   # esiæƒé™é…ç½®ï¼Œéœ€è¦å’Œç”³è¯·çš„åº”ç”¨ä¿æŒä¸€è‡´ï¼Œé»˜è®¤å…¨éƒ¨ä¸ºtrueï¼Œæ„ä¸ºå…¨éƒ¨æƒé™ï¼Œéœ€è¦å…³é—­çš„æƒé™æ”¹ä¸ºfalseã€‚
publicData = true
esi-calendar.respond_calendar_events.v1 = true
esi-calendar.read_calendar_events.v1 = true
esi-location.read_location.v1 = true
esi-location.read_ship_type.v1 = true
esi-mail.organize_mail.v1 = true
......
```

## å…³äºå·¥ä¸šè§„åˆ’å¦‚ä½•ä½¿ç”¨çš„ä¸€ä»½ç²—ç•¥çš„è¯´æ˜ï¼Œå…ˆå‡‘åˆç”¨
[å°å¡botåˆçº§ä½¿ç”¨æŒ‡å—](https://conscious-cord-0d1.notion.site/bot-1920b0a9ac1b80998d71c4349b241145)

# ğŸŒŸæ”¯æŒä¸€ä¸‹
è§‰å¾—å¥½ç”¨çš„è¯ï¼Œç»™å­©å­æ‰“ç‚¹iskå‘—~ 

`ID: Alero AraragiEro`

